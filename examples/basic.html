<!doctype html>

<html lang="en">
<head>
	<meta charset="utf-8">
	<title>HTML5 Video Keyframes Example</title>
	<meta name="description" content="The HTML5 Herald">
	<meta name="author" content="SitePoint">

	<link rel="stylesheet" href="basic.css">
</head>

<body>
	<div class="wrapper">
		 <video width="320" height="240" id="video-0" muted buffer onloadeddata="videoLoaded();">
            <source src="basic.mp4" type="video/mp4">
            <source src="basic.ogg" type="video/ogg"> <!-- I can't be arsed testing with ogg from the limited user base -->
            Your browser does not support the video tag.
        </video>
		<div class="controls">
			<a href="javascript:;" onclick="toWedding()">To Wedding</a><br>
			<a href="javascript:;" onclick="weddingLoop()">Wedding Loop</a><br>
			<a href="javascript:;" onclick="headBangLoop()">Head Bang Loop with window function</a><br>
			<a href="javascript:;" onclick="scope.doFunction()">fence Fall to pause with scoped function</a><br>
		</div>
	</div>
<!-- Scripts -->
<script src="../bower_components/es6-promise/promise.min.js"></script>	
<script src="../bower_components/xml2json/xml2json.js"></script>
<script src="../src/html5videokeyframes.js"></script>
<script>
	window.onload = function () {
		init();
	}

	var video;

	function init(){
		video = vkf.init({
			src: 'basic.xml',
			id: 'video-0',
			buffer: true			
		});	
		video.gotoAndPlay('intro_loop');
	}

	function toWedding(){
		video.gotoAndPlay('to_wedding');
	}
	function weddingLoop(){
		video.gotoAndPlay('wedding_loop');
	}
	function headBangLoop(){
		video.gotoAndPlay('head_bang_loop');	
	}
	function headBangWindowFunction(params){
		console.log(params);
	}

	var scope = new FenceFall();

	function FenceFall(){
		var that = this;

		this.doFunction = function(){
			video.gotoAndPlay({
				name:'fence_fall',
				onComplete: {
					func:[
						'pause',
						{
							name: 'fenceFallScopeFunction',
							params: 'bar, foo',
							scope: that
						},
						{
							name: 'fenceFallScopeFunction2',
							params: 'bar, foo, 2',
							scope: that
						},
						{
							name: 'headBangWindowFunction',
							params: 'head bang call from fence fall',
							scope: window
						}
					]					
				}
			});
		}

		this.fenceFallScopeFunction = function(params){
			console.log(params);
		}
		this.fenceFallScopeFunction2 = function(params){
			console.log(params);
		}
	}


	function videoLoaded(){
		console.log('video loaded');
	}
</script>
</body>
</html>

